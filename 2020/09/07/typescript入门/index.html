<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="typescript入门其实Vue官方从2.6.X版本开始就部分使用Ts重写了。 我个人对更严格类型限制没有积极的看法，毕竟各类转类型的骚写法写习惯了。 然鹅最近的一个项目中，是TypeScript+ Vue，毛计喇，学之……真香！ 注意此篇标题的“前”，本文旨在讲Ts混入框架的使用，不讲Class API  1. 使用官方脚手架构建123npm install -g @vue&#x2F;cliy">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/2020/09/07/typescript%E5%85%A5%E9%97%A8/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="typescript入门其实Vue官方从2.6.X版本开始就部分使用Ts重写了。 我个人对更严格类型限制没有积极的看法，毕竟各类转类型的骚写法写习惯了。 然鹅最近的一个项目中，是TypeScript+ Vue，毛计喇，学之……真香！ 注意此篇标题的“前”，本文旨在讲Ts混入框架的使用，不讲Class API  1. 使用官方脚手架构建123npm install -g @vue&#x2F;cliy">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/6/13/16b5094ed2a96828?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/6/12/16b47a57d82715e9?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/6/12/16b47a57d83e1974?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/6/12/16b47a57dd7f8c66?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/6/12/16b47a57daeaf341?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/6/12/16b47a57e05c4d0f?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/6/12/16b47a57de204bb4?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/6/12/16b47a58028534c2?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/6/12/16b47a580a458319?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/6/12/16b47a580c96180f?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/6/12/16b47a580eb8d6f7?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/6/12/16b47a5811b7c692?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/6/12/16b47a58137c6084?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/6/12/16b47a58322260c4?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/6/12/16b47a582b658d41?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/6/12/16b47a58357d0129?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/6/12/16b47a5836a7344f?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/6/12/16b47a5839fb5caa?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/6/12/16b47a584a48d1d6?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/6/13/16b512f2dc49f9e5?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/6/12/16b47a58564149b6?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/6/14/16b53b466001ed96?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/6/13/16b512f30ff5e238?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/6/14/16b53ada6dbb6000?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/6/13/16b512f306db5c07?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/6/14/16b53e37a96b8d86?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="article:published_time" content="2020-09-07T03:46:30.014Z">
<meta property="article:modified_time" content="2020-07-20T05:41:53.389Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://user-gold-cdn.xitu.io/2019/6/13/16b5094ed2a96828?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.1.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-typescript入门" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/09/07/typescript%E5%85%A5%E9%97%A8/" class="article-date">
  <time datetime="2020-09-07T03:46:30.014Z" itemprop="datePublished">2020-09-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="typescript入门"><a href="#typescript入门" class="headerlink" title="typescript入门"></a>typescript入门</h2><p><strong>其实<code>Vue</code>官方从<code>2.6.X</code>版本开始就部分使用<code>Ts</code>重写了。</strong></p>
<p>我个人对更严格类型限制没有积极的看法，毕竟各类转类型的骚写法写习惯了。</p>
<p>然鹅最近的一个项目中，是<code>TypeScript</code>+ <code>Vue</code>，毛计喇，学之……真香！</p>
<p><strong>注意此篇标题的“前”，本文旨在讲<code>Ts</code>混入框架的使用，不讲<code>Class API</code></strong></p>
<p><img src="https://user-gold-cdn.xitu.io/2019/6/13/16b5094ed2a96828?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p>
<h2 id="1-使用官方脚手架构建"><a href="#1-使用官方脚手架构建" class="headerlink" title="1. 使用官方脚手架构建"></a>1. 使用官方脚手架构建</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @vue&#x2F;cli</span><br><span class="line"></span><br><span class="line">yarn global add @vue&#x2F;cli</span><br></pre></td></tr></table></figure>

<p>新的<code>Vue CLI</code>工具允许开发者 使用 <code>TypeScript</code> 集成环境 创建新项目。</p>
<p>只需运行<code>vue create my-app</code>。</p>
<p>然后，命令行会要求选择预设。使用箭头键选择<code>Manually select features</code>。</p>
<p>接下来，只需确保选择了<code>TypeScript</code>和<code>Babel</code>选项，如下图：</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/6/12/16b47a57d82715e9?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p>
<p>完成此操作后，它会询问你是否要使用<code>class-style component syntax</code>。</p>
<p>然后配置其余设置，使其看起来如下图所示。</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/6/12/16b47a57d83e1974?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p>
<p>Vue CLI工具现在将安装所有依赖项并设置项目。</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/6/12/16b47a57dd7f8c66?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p>
<p>接下来就跑项目喇。</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/6/12/16b47a57daeaf341?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p>
<p>总之，先跑起来再说。</p>
<h2 id="2-项目目录解析"><a href="#2-项目目录解析" class="headerlink" title="2. 项目目录解析"></a>2. 项目目录解析</h2><p>通过<code>tree</code>指令查看目录结构后可发现其结构和正常构建的大有不同。</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/6/12/16b47a57e05c4d0f?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p>
<p>这里主要关注<code>shims-tsx.d.ts</code>和 <code>shims-vue.d.ts</code>两个文件</p>
<p>两句话概括：</p>
<ul>
<li><code>shims-tsx.d.ts</code>，允许你以<code>.tsx</code>结尾的文件，在<code>Vue</code>项目中编写<code>jsx</code>代码</li>
<li><code>shims-vue.d.ts</code> 主要用于 <code>TypeScript</code> 识别<code>.vue</code> 文件，<code>Ts</code>默认并不支持导入 <code>vue</code> 文件，这个文件告诉<code>ts</code> 导入<code>.vue</code> 文件都按<code>VueConstructor&lt;Vue&gt;</code>处理。</li>
</ul>
<p>此时我们打开亲切的<code>src/components/HelloWorld.vue</code>，将会发现写法已大有不同</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;hello&quot;&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;&#x2F;h1&gt;</span><br><span class="line">    &lt;!-- 省略 --&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang&#x3D;&quot;ts&quot;&gt;</span><br><span class="line">import &#123; Component, Prop, Vue &#125; from &#39;vue-property-decorator&#39;;</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">export default class HelloWorld extends Vue &#123;</span><br><span class="line">  @Prop() private msg!: string;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- Add &quot;scoped&quot; attribute to limit CSS to this component only --&gt;</span><br><span class="line">&lt;style scoped&gt;&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<p>至此，准备开启新的篇章 <code>TypeScript</code>极速入门 和 <code>vue-property-decorator</code></p>
<h2 id="3-TypeScript极速入门"><a href="#3-TypeScript极速入门" class="headerlink" title="3. TypeScript极速入门"></a>3. <code>TypeScript</code>极速入门</h2><h3 id="3-1-基本类型和扩展类型"><a href="#3-1-基本类型和扩展类型" class="headerlink" title="3.1 基本类型和扩展类型"></a>3.1 基本类型和扩展类型</h3><p><img src="https://user-gold-cdn.xitu.io/2019/6/12/16b47a57de204bb4?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p>
<p><code>Typescript</code>与<code>Javascript</code>共享相同的基本类型，但有一些额外的类型。</p>
<ul>
<li>元组 <code>Tuple</code></li>
<li>枚举 <code>enum</code></li>
<li><code>Any</code> 与<code>Void</code></li>
</ul>
<h4 id="1-基本类型合集"><a href="#1-基本类型合集" class="headerlink" title="1. 基本类型合集"></a>1. 基本类型合集</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 数字，二、八、十六进制都支持</span><br><span class="line">let decLiteral: number &#x3D; 6;</span><br><span class="line">let hexLiteral: number &#x3D; 0xf00d;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 字符串，单双引都行</span><br><span class="line">let name: string &#x3D; &quot;bob&quot;;</span><br><span class="line">let sentence: string &#x3D; &#96;Hello, my name is $&#123; name &#125;.</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 数组，第二种方式是使用数组泛型，Array&lt;元素类型&gt;：</span><br><span class="line">let list: number[] &#x3D; [1, 2, 3];</span><br><span class="line">let list: Array&lt;number&gt; &#x3D; [1, 2, 3];</span><br><span class="line"></span><br><span class="line">let u: undefined &#x3D; undefined;</span><br><span class="line">let n: null &#x3D; null;</span><br></pre></td></tr></table></figure>

<h4 id="2-特殊类型"><a href="#2-特殊类型" class="headerlink" title="2. 特殊类型"></a>2. 特殊类型</h4><h5 id="1-元组-Tuple"><a href="#1-元组-Tuple" class="headerlink" title="1. 元组 Tuple"></a>1. <strong>元组 <code>Tuple</code></strong><img src="https://user-gold-cdn.xitu.io/2019/6/12/16b47a58028534c2?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></h5><p>想象 元组 作为有组织的数组，你需要以正确的顺序预定义数据类型。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const messyArray &#x3D; [&#39; something&#39;, 2, true, undefined, null];</span><br><span class="line">const tuple: [number, string, string] &#x3D; [24, &quot;Indrek&quot; , &quot;Lasn&quot;]</span><br></pre></td></tr></table></figure>

<p>如果不遵循 为元组 预设排序的索引规则，那么<code>Typescript</code>会警告。</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/6/12/16b47a580a458319?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p>
<p> （<code>tuple</code>第一项应为<code>number</code>类型）</p>
<h5 id="2-枚举-enum"><a href="#2-枚举-enum" class="headerlink" title="2. 枚举 enum"></a>2. 枚举 <code>enum</code></h5><p><img src="https://user-gold-cdn.xitu.io/2019/6/12/16b47a580c96180f?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p>
<p><code>enum</code>类型是对JavaScript标准数据类型的一个补充。 像C#等其它语言一样，使用枚举类型可以为一组数值赋予友好的名字。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 默认情况从0开始为元素编号，也可手动为1开始</span><br><span class="line">enum Color &#123;Red &#x3D; 1, Green &#x3D; 2, Blue &#x3D; 4&#125;</span><br><span class="line">let c: Color &#x3D; Color.Green;</span><br><span class="line"></span><br><span class="line">let colorName: string &#x3D; Color[2];</span><br><span class="line">console.log(colorName);  &#x2F;&#x2F; 输出&#39;Green&#39;因为上面代码里它的值是2</span><br></pre></td></tr></table></figure>

<p>另一个很好的例子是使用枚举来存储应用程序状态。</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/6/12/16b47a580eb8d6f7?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p>
<h5 id="3-Void"><a href="#3-Void" class="headerlink" title="3. Void"></a>3. <code>Void</code></h5><p><img src="https://user-gold-cdn.xitu.io/2019/6/12/16b47a5811b7c692?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p>
<p>在<code>Typescript</code>中，<strong>你必须在函数中定义返回类型</strong>。像这样：</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/6/12/16b47a58137c6084?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p>
<p>若没有返回值，则会报错：</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/6/12/16b47a58322260c4?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p>
<p>我们可以将其返回值定义为<code>void</code>:</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/6/12/16b47a582b658d41?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p>
<p>此时将无法 <code>return</code></p>
<h5 id="4-Any"><a href="#4-Any" class="headerlink" title="4. Any"></a>4. <code>Any</code></h5><p><img src="https://user-gold-cdn.xitu.io/2019/6/12/16b47a58357d0129?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p>
<p>Emmm…就是什么类型都行，当你无法确认在处理什么类型时可以用这个。</p>
<p>但要慎重使用，用多了就失去使用Ts的意义。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let person: any &#x3D; &quot;前端劝退师&quot;</span><br><span class="line">person &#x3D; 25</span><br><span class="line">person &#x3D; true</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<p>主要应用场景有：</p>
<ol>
<li>接入第三方库</li>
<li>Ts菜逼前期都用</li>
</ol>
<h5 id="5-Never"><a href="#5-Never" class="headerlink" title="5. Never"></a>5. <code>Never</code></h5><p><img src="https://user-gold-cdn.xitu.io/2019/6/12/16b47a5836a7344f?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p>
<p>用很粗浅的话来描述就是：”<code>Never</code>是你永远得不到的爸爸。”</p>
<p>具体的行为是：</p>
<ul>
<li><code>throw new Error(message)</code></li>
<li><code>return error(&quot;Something failed&quot;)</code></li>
<li><code>while (true) &#123;&#125; // 存在无法达到的终点</code></li>
</ul>
<p><img src="https://user-gold-cdn.xitu.io/2019/6/12/16b47a5839fb5caa?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p>
<h4 id="3-类型断言"><a href="#3-类型断言" class="headerlink" title="3. 类型断言"></a>3. 类型断言</h4><p><img src="https://user-gold-cdn.xitu.io/2019/6/12/16b47a584a48d1d6?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p>
<p>简略的定义是：可以用来手动指定一个值的类型。</p>
<p>有两种写法，尖括号和<code>as</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let someValue: any &#x3D; &quot;this is a string&quot;;</span><br><span class="line"></span><br><span class="line">let strLength: number &#x3D; (&lt;string&gt;someValue).length;</span><br><span class="line">let strLength: number &#x3D; (someValue as string).length;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<p>使用例子有：</p>
<p>当 TypeScript 不确定一个联合类型的变量到底是哪个类型的时候，我们只能访问此联合类型的所有类型里共有的属性或方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function getLength(something: string | number): number &#123;</span><br><span class="line">    return something.length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; index.ts(2,22): error TS2339: Property &#39;length&#39; does not exist on type &#39;string | number&#39;.</span><br><span class="line">&#x2F;&#x2F;   Property &#39;length&#39; does not exist on type &#39;number&#39;.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>如果你访问长度将会报错，而有时候，我们确实需要在还不确定类型的时候就访问其中一个类型的属性或方法，此时需要断言才不会报错：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function getLength(something: string | number): number &#123;</span><br><span class="line">    if ((&lt;string&gt;something).length) &#123;</span><br><span class="line">        return (&lt;string&gt;something).length;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        return something.toString().length;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h3 id="3-2-泛型：Generics"><a href="#3-2-泛型：Generics" class="headerlink" title="3.2 泛型：Generics"></a>3.2 泛型：<code>Generics</code></h3><p>软件工程的一个主要部分就是构建组件，构建的组件不仅需要具有明确的定义和统一的接口，同时也需要组件可复用。支持现有的数据类型和将来添加的数据类型的组件为大型软件系统的开发过程提供很好的灵活性。</p>
<p>在<code>C#</code>和<code>Java</code>中，可以使用”泛型”来创建可复用的组件，并且组件可支持多种数据类型。这样便可以让用户根据自己的数据类型来使用组件。</p>
<h4 id="1-泛型方法"><a href="#1-泛型方法" class="headerlink" title="1. 泛型方法"></a>1. 泛型方法</h4><p>在TypeScript里，<strong>声明泛型方法</strong>有以下两种方式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function gen_func1&lt;T&gt;(arg: T): T &#123;</span><br><span class="line">    return arg;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; 或者</span><br><span class="line">let gen_func2: &lt;T&gt;(arg: T) &#x3D;&gt; T &#x3D; function (arg) &#123;</span><br><span class="line">    return arg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>调用方式</strong>也有两种：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gen_func1&lt;string&gt;(&#39;Hello world&#39;);</span><br><span class="line">gen_func2(&#39;Hello world&#39;); </span><br><span class="line">&#x2F;&#x2F; 第二种调用方式可省略类型参数，因为编译器会根据传入参数来自动识别对应的类型。</span><br></pre></td></tr></table></figure>

<h4 id="2-泛型与Any"><a href="#2-泛型与Any" class="headerlink" title="2. 泛型与Any"></a>2. 泛型与<code>Any</code></h4><p><code>Ts</code> 的特殊类型 <code>Any</code> 在具体使用时，可以代替任意类型，咋一看两者好像没啥区别，其实不然：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 方法一：带有any参数的方法</span><br><span class="line">function any_func(arg: any): any &#123;</span><br><span class="line">    console.log(arg.length);</span><br><span class="line">		return arg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 方法二：Array泛型方法</span><br><span class="line">function array_func&lt;T&gt;(arg: Array&lt;T&gt;): Array&lt;T&gt; &#123;</span><br><span class="line">	  console.log(arg.length);</span><br><span class="line">		return arg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>方法一，打印了<code>arg</code>参数的<code>length</code>属性。因为<code>any</code>可以代替任意类型，所以该方法在传入参数不是数组或者带有<code>length</code>属性对象时，会抛出异常。</li>
<li>方法二，定义了参数类型是<code>Array</code>的泛型类型，肯定会有<code>length</code>属性，所以不会抛出异常。</li>
</ul>
<h4 id="3-泛型类型"><a href="#3-泛型类型" class="headerlink" title="3. 泛型类型"></a>3. 泛型类型</h4><p>泛型接口：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">interface Generics_interface&lt;T&gt; &#123;</span><br><span class="line">    (arg: T): T;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">function func_demo&lt;T&gt;(arg: T): T &#123;</span><br><span class="line">    return arg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let func1: Generics_interface&lt;number&gt; &#x3D; func_demo;</span><br><span class="line">func1(123);     &#x2F;&#x2F; 正确类型的实际参数</span><br><span class="line">func1(&#39;123&#39;);   &#x2F;&#x2F; 错误类型的实际参数</span><br></pre></td></tr></table></figure>

<h3 id="3-3-自定义类型：Interface-vs-Type-alias"><a href="#3-3-自定义类型：Interface-vs-Type-alias" class="headerlink" title="3.3 自定义类型：Interface vs Type alias"></a>3.3 自定义类型：<code>Interface</code> vs <code>Type alias</code></h3><p><code>Interface</code>，国内翻译成接口。</p>
<p><code>Type alias</code>，类型别名。</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/6/13/16b512f2dc49f9e5?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p>
<p>以下内容来自：</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5c2723635188252d1d34dc7d#heading-11">Typescript 中的 interface 和 type 到底有什么区别</a></p>
</blockquote>
<h4 id="1-相同点"><a href="#1-相同点" class="headerlink" title="1. 相同点"></a>1. 相同点</h4><p><strong>都可以用来描述一个对象或函数：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">interface User &#123;</span><br><span class="line">  name: string</span><br><span class="line">  age: number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type User &#x3D; &#123;</span><br><span class="line">  name: string</span><br><span class="line">  age: number</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">interface SetUser &#123;</span><br><span class="line">  (name: string, age: number): void;</span><br><span class="line">&#125;</span><br><span class="line">type SetUser &#x3D; (name: string, age: number): void;</span><br></pre></td></tr></table></figure>

<p><strong>都允许拓展（extends）：</strong></p>
<p><code>interface</code> 和 <code>type</code> 都可以拓展，并且两者并不是相互独立的，也就是说<code>interface</code>可以 <code>extends type</code>, <code>type</code> 也可以 <code>extends interface</code> 。 <strong>虽然效果差不多，但是两者语法不同</strong>。</p>
<p><strong>interface extends interface</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">interface Name &#123; </span><br><span class="line">  name: string; </span><br><span class="line">&#125;</span><br><span class="line">interface User extends Name &#123; </span><br><span class="line">  age: number; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>type extends type</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">type Name &#x3D; &#123; </span><br><span class="line">  name: string; </span><br><span class="line">&#125;</span><br><span class="line">type User &#x3D; Name &amp; &#123; age: number  &#125;;</span><br></pre></td></tr></table></figure>

<p><strong>interface extends type</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">type Name &#x3D; &#123; </span><br><span class="line">  name: string; </span><br><span class="line">&#125;</span><br><span class="line">interface User extends Name &#123; </span><br><span class="line">  age: number; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>type extends interface</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">interface Name &#123; </span><br><span class="line">  name: string; </span><br><span class="line">&#125;</span><br><span class="line">type User &#x3D; Name &amp; &#123; </span><br><span class="line">  age: number; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-不同点"><a href="#2-不同点" class="headerlink" title="2. 不同点"></a>2. 不同点</h4><p><strong><code>type</code> 可以而 <code>interface</code> 不行</strong></p>
<ul>
<li><code>type</code> 可以声明基本类型别名，联合类型，元组等类型</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 基本类型别名</span><br><span class="line">type Name &#x3D; string</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 联合类型</span><br><span class="line">interface Dog &#123;</span><br><span class="line">    wong();</span><br><span class="line">&#125;</span><br><span class="line">interface Cat &#123;</span><br><span class="line">    miao();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Pet &#x3D; Dog | Cat</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 具体定义数组每个位置的类型</span><br><span class="line">type PetList &#x3D; [Dog, Pet] </span><br></pre></td></tr></table></figure>

<ul>
<li><code>type</code> 语句中还可以使用 <code>typeof</code>获取实例的 类型进行赋值</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 当你想获取一个变量的类型时，使用 typeof</span><br><span class="line">let div &#x3D; document.createElement(&#39;div&#39;);</span><br><span class="line">type B &#x3D; typeof div </span><br></pre></td></tr></table></figure>

<ul>
<li>其他骚操作</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">type StringOrNumber &#x3D; string | number;  </span><br><span class="line">type Text &#x3D; string | &#123; text: string &#125;;  </span><br><span class="line">type NameLookup &#x3D; Dictionary&lt;string, Person&gt;;  </span><br><span class="line">type Callback&lt;T&gt; &#x3D; (data: T) &#x3D;&gt; void;  </span><br><span class="line">type Pair&lt;T&gt; &#x3D; [T, T];  </span><br><span class="line">type Coordinates &#x3D; Pair&lt;number&gt;;  </span><br><span class="line">type Tree&lt;T&gt; &#x3D; T | &#123; left: Tree&lt;T&gt;, right: Tree&lt;T&gt; &#125;; </span><br></pre></td></tr></table></figure>

<p><strong><code>interface</code>可以而 <code>type</code>不行</strong></p>
<p><code>interface</code> 能够声明合并</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">interface User &#123;</span><br><span class="line">  name: string</span><br><span class="line">  age: number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface User &#123;</span><br><span class="line">  sex: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;*</span><br><span class="line">User 接口为 &#123;</span><br><span class="line">  name: string</span><br><span class="line">  age: number</span><br><span class="line">  sex: string </span><br><span class="line">&#125;</span><br><span class="line">*&#x2F;</span><br></pre></td></tr></table></figure>

<p><code>interface</code> 有可选属性和只读属性</p>
<ul>
<li><p>可选属性</p>
<p>接口里的属性不全都是必需的。 有些是只在某些条件下存在，或者根本不存在。 例如给函数传入的参数对象中只有部分属性赋值了。带有可选属性的接口与普通的接口定义差不多，只是在可选属性名字定义的后面加一个<code>?</code>符号。如下所示</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">interface Person &#123;</span><br><span class="line">  name: string;</span><br><span class="line">  age?: number;</span><br><span class="line">  gender?: number;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<ul>
<li><p>只读属性</p>
<p>顾名思义就是这个属性是不可写的，对象属性只能在对象刚刚创建的时候修改其值。 你可以在属性名前用 <code>readonly</code>来指定只读属性，如下所示：</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">interface User &#123;</span><br><span class="line">    readonly loginName: string;</span><br><span class="line">    password: string;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>上面的例子说明，当完成User对象的初始化后loginName就不可以修改了。</p>
<h3 id="3-4-实现与继承：implementsvsextends"><a href="#3-4-实现与继承：implementsvsextends" class="headerlink" title="3.4 实现与继承：implementsvsextends"></a>3.4 实现与继承：<code>implements</code>vs<code>extends</code></h3><p><code>extends</code>很明显就是ES6里面的类继承，那么<code>implement</code>又是做什么的呢？它和<code>extends</code>有什么不同？</p>
<p><code>implement</code>，实现。与C#或Java里接口的基本作用一样，<code>TypeScript</code>也能够用它来明确的强制一个类去符合某种契约</p>
<p><strong>implement基本用法</strong>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">interface IDeveloper &#123;</span><br><span class="line">   name: string;</span><br><span class="line">   age?: number;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; OK</span><br><span class="line">class dev implements IDeveloper &#123;</span><br><span class="line">    name &#x3D; &#39;Alex&#39;;</span><br><span class="line">    age &#x3D; 20;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; OK</span><br><span class="line">class dev2 implements IDeveloper &#123;</span><br><span class="line">    name &#x3D; &#39;Alex&#39;;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; Error</span><br><span class="line">class dev3 implements IDeveloper &#123;</span><br><span class="line">    name &#x3D; &#39;Alex&#39;;</span><br><span class="line">    age &#x3D; &#39;9&#39;;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>而<code>extends</code>是继承父类，两者其实可以混着用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">class A extends B implements C,D,E </span><br></pre></td></tr></table></figure>

<p>搭配 <code>interface</code>和<code>type</code>的用法有：</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/6/12/16b47a58564149b6?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p>
<h3 id="3-5-声明文件与命名空间：declare-和-namespace"><a href="#3-5-声明文件与命名空间：declare-和-namespace" class="headerlink" title="3.5 声明文件与命名空间：declare 和 namespace"></a>3.5 声明文件与命名空间：<code>declare</code> 和 <code>namespace</code></h3><p>前面我们讲到Vue项目中的<code>shims-tsx.d.ts</code>和<code>shims-vue.d.ts</code>，其初始内容是这样的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; shims-tsx.d.ts</span><br><span class="line">import Vue, &#123; VNode &#125; from &#39;vue&#39;;</span><br><span class="line"></span><br><span class="line">declare global &#123;</span><br><span class="line">  namespace JSX &#123;</span><br><span class="line">    &#x2F;&#x2F; tslint:disable no-empty-interface</span><br><span class="line">    interface Element extends VNode &#123;&#125;</span><br><span class="line">    &#x2F;&#x2F; tslint:disable no-empty-interface</span><br><span class="line">    interface ElementClass extends Vue &#123;&#125;</span><br><span class="line">    interface IntrinsicElements &#123;</span><br><span class="line">      [elem: string]: any;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; shims-vue.d.ts</span><br><span class="line">declare module &#39;*.vue&#39; &#123;</span><br><span class="line">  import Vue from &#39;vue&#39;;</span><br><span class="line">  export default Vue;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p><code>declare</code>：当使用第三方库时，我们需要引用它的声明文件，才能获得对应的代码补全、接口提示等功能。</p>
<p>这里列举出几个常用的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">declare var 声明全局变量</span><br><span class="line">declare function 声明全局方法</span><br><span class="line">declare class 声明全局类</span><br><span class="line">declare enum 声明全局枚举类型</span><br><span class="line">declare global 扩展全局变量</span><br><span class="line">declare module 扩展模块</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<p><code>namespace</code>：“内部模块”现在称做“命名空间”</p>
<p><code>module X &#123;</code> 相当于现在推荐的写法 <code>namespace X &#123;</code>)</p>
<h2 id="跟其他-JS-库协同"><a href="#跟其他-JS-库协同" class="headerlink" title="跟其他 JS 库协同"></a>跟其他 JS 库协同</h2><p>类似模块，同样也可以通过为其他 JS 库使用了命名空间的库创建 <code>.d.ts</code> 文件的声明文件，如为 <code>D3</code> JS 库，可以创建这样的声明文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">declare namespace D3&#123;</span><br><span class="line">    export interface Selectors &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line">declare var d3: D3.Base; </span><br></pre></td></tr></table></figure>

<p>所以上述两个文件：</p>
<ul>
<li><code>shims-tsx.d.ts</code>， 在全局变量 <code>global</code>中批量命名了数个内部模块。</li>
<li><code>shims-vue.d.ts</code>，意思是告诉 <code>TypeScript</code> <code>*.vue</code> 后缀的文件可以交给 <code>vue</code> 模块来处理。</li>
</ul>
<h3 id="3-6-访问修饰符：private、public、protected"><a href="#3-6-访问修饰符：private、public、protected" class="headerlink" title="3.6 访问修饰符：private、public、protected"></a>3.6 访问修饰符：<code>private</code>、<code>public</code>、<code>protected</code></h3><p>其实很好理解：</p>
<ol>
<li><p>默认为<code>public</code></p>
</li>
<li><p>当成员被标记为<code>private</code>时，它就不能在声明它的类的外部访问，比如：</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">class Animal &#123;</span><br><span class="line">    private name: string;</span><br><span class="line">    constructor(theName: string) &#123;</span><br><span class="line">        this.name &#x3D; theName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let a &#x3D; new Animal(&#39;Cat&#39;).name; &#x2F;&#x2F;错误，‘name’是私有的 </span><br></pre></td></tr></table></figure>

<ol start="3">
<li><code>protected</code>和<code>private</code>类似，但是，<code>protected</code>成员在派生类中可以访问</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">class Animal &#123;</span><br><span class="line">    protected name: string;</span><br><span class="line">    constructor(theName: string) &#123;</span><br><span class="line">        this.name &#x3D; theName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Rhino extends Animal &#123;</span><br><span class="line">    constructor() &#123;</span><br><span class="line">        super(&#39;Rhino&#39;);</span><br><span class="line">   &#125;         </span><br><span class="line">   getName() &#123;</span><br><span class="line">       console.log(this.name) &#x2F;&#x2F;此处的name就是Animal类中的name</span><br><span class="line">   &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h3 id="3-7-可选参数-和非空断言操作符（-）"><a href="#3-7-可选参数-和非空断言操作符（-）" class="headerlink" title="3.7 可选参数 ( ?: )和非空断言操作符（!.）"></a>3.7 可选参数 ( ?: )和非空断言操作符（!.）</h3><p><strong>可选参数</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function buildName(firstName: string, lastName?: string) &#123;</span><br><span class="line">    return firstName + &#39; &#39; + lastName</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 错误演示</span><br><span class="line">buildName(&quot;firstName&quot;, &quot;lastName&quot;, &quot;lastName&quot;)</span><br><span class="line">&#x2F;&#x2F; 正确演示</span><br><span class="line">buildName(&quot;firstName&quot;)</span><br><span class="line">&#x2F;&#x2F; 正确演示</span><br><span class="line">buildName(&quot;firstName&quot;, &quot;lastName&quot;) </span><br></pre></td></tr></table></figure>

<p><strong>非空断言操作符：</strong></p>
<p>能确定变量值一定不为空时使用。</p>
<p>与可选参数 不同的是，非空断言操作符不会防止出现 null 或 undefined。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let s &#x3D; e!.name;  &#x2F;&#x2F; 断言e是非空并访问name属性 </span><br></pre></td></tr></table></figure>

<h2 id="4-Vue组件的Ts写法"><a href="#4-Vue组件的Ts写法" class="headerlink" title="4. Vue组件的Ts写法"></a>4. <code>Vue</code>组件的<code>Ts</code>写法</h2><p>从 vue2.5 之后，vue 对 ts 有更好的支持。根据<a target="_blank" rel="noopener" href="https://vuejs.org/v2/guide/typescript.html">官方文档</a>，vue 结合 typescript ，有两种书写方式：</p>
<p>**Vue.extend **</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#39;vue&#39;</span><br><span class="line"></span><br><span class="line">const Component &#x3D; Vue.extend(&#123;</span><br><span class="line">&#x2F;&#x2F; type inference enabled</span><br><span class="line">&#125;) </span><br></pre></td></tr></table></figure>

<p><strong>vue-class-component</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Component, Vue, Prop &#125; from &#39;vue-property-decorator&#39;</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">export default class Test extends Vue &#123;</span><br><span class="line">  @Prop(&#123; type: Object &#125;)</span><br><span class="line">  private test: &#123; value: string &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>理想情况下，<code>Vue.extend</code> 的书写方式，是学习成本最低的。在现有写法的基础上，几乎 0 成本的迁移。</p>
<p>但是<code>Vue.extend</code>模式，需要与<code>mixins</code> 结合使用。在 mixin 中定义的方法，不会被 typescript 识别到</p>
<p>，这就意味着会出现<strong>丢失代码提示、类型检查、编译报错等问题。</strong></p>
<p>菜鸟才做选择，大佬都挑最好的。直接讲第二种吧：</p>
<h3 id="4-1-vue-class-component"><a href="#4-1-vue-class-component" class="headerlink" title="4.1 vue-class-component"></a>4.1 <code>vue-class-component</code></h3><p><img src="https://user-gold-cdn.xitu.io/2019/6/14/16b53b466001ed96?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p>
<p>我们回到<code>src/components/HelloWorld.vue</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;hello&quot;&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;&#x2F;h1&gt;</span><br><span class="line">    &lt;!-- 省略 --&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang&#x3D;&quot;ts&quot;&gt;</span><br><span class="line">import &#123; Component, Prop, Vue &#125; from &#39;vue-property-decorator&#39;;</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">export default class HelloWorld extends Vue &#123;</span><br><span class="line">  @Prop() private msg!: string;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- Add &quot;scoped&quot; attribute to limit CSS to this component only --&gt;</span><br><span class="line">&lt;style scoped&gt;&lt;&#x2F;style&gt; </span><br></pre></td></tr></table></figure>

<p>有写过<code>python</code>的同学应该会发现似曾相识：</p>
<ul>
<li><code>vue-property-decorator</code>这个官方支持的库里，提供了函数 **装饰器（修饰符）**语法</li>
</ul>
<h4 id="1-函数修饰符"><a href="#1-函数修饰符" class="headerlink" title="1. 函数修饰符 @"></a>1. 函数修饰符 <code>@</code></h4><p>“@”，与其说是修饰函数倒不如说是引用、调用它修饰的函数。</p>
<p>或者用句大白话描述：<code>@</code>: “下面的被我包围了。”</p>
<p>举个栗子，下面的一段代码，里面两个函数，没有被调用，也会有输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">test(f)&#123;</span><br><span class="line">    console.log(&quot;before ...&quot;);</span><br><span class="line">    f()</span><br><span class="line">		console.log(&quot;after ...&quot;);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">@test</span><br><span class="line">func()&#123;</span><br><span class="line">	console.log(&quot;func was called&quot;);</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>直接运行，输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">before ...</span><br><span class="line">func was called</span><br><span class="line">after ... </span><br></pre></td></tr></table></figure>

<p>上面代码可以看出来:</p>
<ul>
<li>只定义了两个函数：<code>test</code>和<code>func</code>，没有调用它们。</li>
<li>如果没有<a href="mailto:%22@test">“@test</a>”，运行应该是没有任何输出的。</li>
</ul>
<p>但是，解释器读到函数修饰符“@”的时候，后面步骤会是这样：</p>
<ol>
<li><p>去调用<code>test</code>函数，<code>test</code>函数的入口参数就是那个叫“<code>func</code>”的函数；</p>
</li>
<li><p><code>test</code>函数被执行，入口参数的（也就是<code>func</code>函数）会被调用（执行）；</p>
</li>
</ol>
<p>换言之，修饰符带的那个函数的入口参数，就是下面的那个整个的函数。有点儿类似<code>JavaScrip</code>t里面的 <code>function a (function () &#123; ... &#125;);</code></p>
<p><img src="https://user-gold-cdn.xitu.io/2019/6/13/16b512f30ff5e238?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p>
<h4 id="2-vue-property-decorator和vuex-class提供的装饰器"><a href="#2-vue-property-decorator和vuex-class提供的装饰器" class="headerlink" title="2. vue-property-decorator和vuex-class提供的装饰器"></a>2. <code>vue-property-decorator</code>和<code>vuex-class</code>提供的装饰器</h4><p><code>vue-property-decorator</code>的装饰器：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/kaorun343/vue-property-decorator#Prop"><code>@Prop</code></a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/kaorun343/vue-property-decorator#PropSync"><code>@PropSync</code></a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/kaorun343/vue-property-decorator#Provide"><code>@Provide</code></a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/kaorun343/vue-property-decorator#Model"><code>@Model</code></a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/kaorun343/vue-property-decorator#Watch"><code>@Watch</code></a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/kaorun343/vue-property-decorator#Provide"><code>@Inject</code></a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/kaorun343/vue-property-decorator#Provide"><code>@Provide</code></a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/kaorun343/vue-property-decorator#Emit"><code>@Emit</code></a></li>
<li><code>@Component</code> (<strong>provided by</strong> <a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-class-component">vue-class-component</a>)</li>
<li><code>Mixins</code> (the helper function named <code>mixins</code> <strong>provided by</strong> <a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-class-component">vue-class-component</a>)</li>
</ul>
<p><code>vuex-class</code>的装饰器：</p>
<ul>
<li>@State</li>
<li>@Getter</li>
<li>@Action</li>
<li>@Mutation</li>
</ul>
<p>我们拿原始Vue组件模版来看：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">import &#123;componentA,componentB&#125; from &#39;@&#x2F;components&#39;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">	components: &#123; componentA, componentB&#125;,</span><br><span class="line">	props: &#123;</span><br><span class="line">    propA: &#123; type: Number &#125;,</span><br><span class="line">    propB: &#123; default: &#39;default value&#39; &#125;,</span><br><span class="line">    propC: &#123; type: [String, Boolean] &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">  &#x2F;&#x2F; 组件数据</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      message: &#39;Hello&#39;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#x2F;&#x2F; 计算属性</span><br><span class="line">  computed: &#123;</span><br><span class="line">    reversedMessage () &#123;</span><br><span class="line">      return this.message.split(&#39;&#39;).reverse().join(&#39;&#39;)</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F; Vuex数据</span><br><span class="line">    step() &#123;</span><br><span class="line">    	return this.$store.state.count</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    changeMessage () &#123;</span><br><span class="line">      this.message &#x3D; &quot;Good bye&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    getName() &#123;</span><br><span class="line">    	let name &#x3D; this.$store.getters[&#39;person&#x2F;name&#39;]</span><br><span class="line">    	return name</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#x2F;&#x2F; 生命周期</span><br><span class="line">  created () &#123; &#125;,</span><br><span class="line">  mounted () &#123; &#125;,</span><br><span class="line">  updated () &#123; &#125;,</span><br><span class="line">  destroyed () &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<p>以上模版替换成修饰符写法则是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Component, Vue, Prop &#125; from &#39;vue-property-decorator&#39;;</span><br><span class="line">import &#123; State, Getter &#125; from &#39;vuex-class&#39;;</span><br><span class="line">import &#123; count, name &#125; from &#39;@&#x2F;person&#39;</span><br><span class="line">import &#123; componentA, componentB &#125; from &#39;@&#x2F;components&#39;;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">    components:&#123; componentA, componentB&#125;,</span><br><span class="line">&#125;)</span><br><span class="line">export default class HelloWorld extends Vue&#123;</span><br><span class="line">	@Prop(Number) readonly propA!: number | undefined</span><br><span class="line">    @Prop(&#123; default: &#39;default value&#39; &#125;) readonly propB!: string</span><br><span class="line">    @Prop([String, Boolean]) readonly propC!: string | boolean | undefined</span><br><span class="line">  </span><br><span class="line">  &#x2F;&#x2F; 原data</span><br><span class="line">  message &#x3D; &#39;Hello&#39;</span><br><span class="line">  </span><br><span class="line">  &#x2F;&#x2F; 计算属性</span><br><span class="line">	private get reversedMessage (): string[] &#123;</span><br><span class="line">  	return this.message.split(&#39;&#39;).reverse().join(&#39;&#39;)</span><br><span class="line">  &#125;</span><br><span class="line">  &#x2F;&#x2F; Vuex 数据</span><br><span class="line">  @State((state: IRootState) &#x3D;&gt; state . booking. currentStep) step!: number</span><br><span class="line">	@Getter( &#39;person&#x2F;name&#39;) name!: name</span><br><span class="line">  </span><br><span class="line">  &#x2F;&#x2F; method</span><br><span class="line">  public changeMessage (): void &#123;</span><br><span class="line">    this.message &#x3D; &#39;Good bye&#39;</span><br><span class="line">  &#125;,</span><br><span class="line">  public getName(): string &#123;</span><br><span class="line">    let storeName &#x3D; name</span><br><span class="line">    return storeName</span><br><span class="line">  &#125;</span><br><span class="line">	&#x2F;&#x2F; 生命周期</span><br><span class="line">  private created ()：void &#123; &#125;,</span><br><span class="line">  private mounted ()：void &#123; &#125;,</span><br><span class="line">  private updated ()：void &#123; &#125;,</span><br><span class="line">  private destroyed ()：void &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<p>正如你所看到的，我们在生命周期 列表那都添加<code>private XXXX</code>方法，因为这不应该公开给其他组件。</p>
<p>而不对<code>method</code>做私有约束的原因是，可能会用到<code>@Emit</code>来向父组件传递信息。</p>
<h3 id="4-2-添加全局工具"><a href="#4-2-添加全局工具" class="headerlink" title="4.2 添加全局工具"></a>4.2 添加全局工具</h3><p>引入全局模块，需要改<code>main.ts</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#39;vue&#39;;</span><br><span class="line">import App from &#39;.&#x2F;App.vue&#39;;</span><br><span class="line">import router from &#39;.&#x2F;router&#39;;</span><br><span class="line">import store from &#39;.&#x2F;store&#39;;</span><br><span class="line"></span><br><span class="line">Vue.config.productionTip &#x3D; false;</span><br><span class="line"></span><br><span class="line">new Vue(&#123;</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  render: (h) &#x3D;&gt; h(App),</span><br><span class="line">&#125;).$mount(&#39;#app&#39;);</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<p><code>npm i VueI18n</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#39;vue&#39;;</span><br><span class="line">import App from &#39;.&#x2F;App.vue&#39;;</span><br><span class="line">import router from &#39;.&#x2F;router&#39;;</span><br><span class="line">import store from &#39;.&#x2F;store&#39;;</span><br><span class="line">&#x2F;&#x2F; 新模块</span><br><span class="line">import i18n from &#39;.&#x2F;i18n&#39;;</span><br><span class="line"></span><br><span class="line">Vue.config.productionTip &#x3D; false;</span><br><span class="line"></span><br><span class="line">new Vue(&#123;</span><br><span class="line">    router, </span><br><span class="line">    store, </span><br><span class="line">    i18n, &#x2F;&#x2F; 新模块</span><br><span class="line">    render: (h) &#x3D;&gt; h(App),</span><br><span class="line">&#125;).$mount(&#39;#app&#39;);</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<p>但仅仅这样，还不够。你需要动<code>src/vue-shim.d.ts</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 声明全局方法</span><br><span class="line">declare module &#39;vue&#x2F;types&#x2F;vue&#39; &#123;</span><br><span class="line">  interface Vue &#123;</span><br><span class="line">        readonly $i18n: VueI18Next;</span><br><span class="line">        $t: TranslationFunction;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<p>之后使用<code>this.$i18n()</code>的话就不会报错了。</p>
<h3 id="4-3-Axios-使用与封装"><a href="#4-3-Axios-使用与封装" class="headerlink" title="4.3 Axios 使用与封装"></a>4.3 Axios 使用与封装</h3><p><code>Axios</code>的封装千人千面</p>
<p>如果只是想简单在Ts里体验使用<code>Axios</code>，可以安装<code>vue-axios</code> <strong>简单使用<code>Axios</code></strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm i axios vue-axios</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<p><code>main.ts</code>添加：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#39;vue&#39;</span><br><span class="line">import axios from &#39;axios&#39;</span><br><span class="line">import VueAxios from &#39;vue-axios&#39;</span><br><span class="line"></span><br><span class="line">Vue.use(VueAxios, axios)</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<p>然后在组件内使用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Vue.axios.get(api).then((response) &#x3D;&gt; &#123;</span><br><span class="line">  console.log(response.data)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">this.axios.get(api).then((response) &#x3D;&gt; &#123;</span><br><span class="line">  console.log(response.data)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">this.$http.get(api).then((response) &#x3D;&gt; &#123;</span><br><span class="line">  console.log(response.data)</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h4 id="1-新建文件request-ts"><a href="#1-新建文件request-ts" class="headerlink" title="1. 新建文件request.ts"></a>1. 新建文件<code>request.ts</code></h4><p>文件目录:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-api</span><br><span class="line">    - main.ts   &#x2F;&#x2F; 实际调用</span><br><span class="line">-utils</span><br><span class="line">    - request.ts  &#x2F;&#x2F; 接口封装</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h4 id="2-request-ts文件解析"><a href="#2-request-ts文件解析" class="headerlink" title="2. request.ts文件解析"></a>2. <code>request.ts</code>文件解析</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">import * as axios from &#39;axios&#39;;</span><br><span class="line">import store from &#39;@&#x2F;store&#39;;</span><br><span class="line">&#x2F;&#x2F; 这里可根据具体使用的UI组件库进行替换</span><br><span class="line">import &#123; Toast &#125; from &#39;vant&#39;;</span><br><span class="line">import &#123; AxiosResponse, AxiosRequestConfig &#125; from &#39;axios&#39;;</span><br><span class="line"> </span><br><span class="line"> &#x2F;* baseURL 按实际项目来定义 *&#x2F;</span><br><span class="line">const baseURL &#x3D; process.env.VUE_APP_URL;</span><br><span class="line"></span><br><span class="line"> &#x2F;* 创建axios实例 *&#x2F;</span><br><span class="line">const service &#x3D; axios.default.create(&#123;</span><br><span class="line">    baseURL,</span><br><span class="line">    timeout: 0, &#x2F;&#x2F; 请求超时时间</span><br><span class="line">    maxContentLength: 4000,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">service.interceptors.request.use((config: AxiosRequestConfig) &#x3D;&gt; &#123;</span><br><span class="line">    return config;</span><br><span class="line">&#125;, (error: any) &#x3D;&gt; &#123;</span><br><span class="line">    Promise.reject(error);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">service.interceptors.response.use(</span><br><span class="line">    (response: AxiosResponse) &#x3D;&gt; &#123;</span><br><span class="line">        if (response.status !&#x3D;&#x3D; 200) &#123;</span><br><span class="line">            Toast.fail(&#39;请求错误！&#39;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            return response.data;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    (error: any) &#x3D;&gt; &#123;</span><br><span class="line">        return Promise.reject(error);</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">export default service;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<p>为了方便，我们还需要定义一套固定的 axios 返回的格式，新建<code>ajax.ts</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">export interface AjaxResponse &#123;</span><br><span class="line">    code: number;</span><br><span class="line">    data: any;</span><br><span class="line">    message: string;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h4 id="3-main-ts接口调用："><a href="#3-main-ts接口调用：" class="headerlink" title="3. main.ts接口调用："></a>3. <code>main.ts</code>接口调用：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; api&#x2F;main.ts</span><br><span class="line">import request from &#39;..&#x2F;utils&#x2F;request&#39;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; get</span><br><span class="line">export function getSomeThings(params:any) &#123;</span><br><span class="line">    return request(&#123;</span><br><span class="line">        url: &#39;&#x2F;api&#x2F;getSomethings&#39;,</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; post</span><br><span class="line">export function postSomeThings(params:any) &#123;</span><br><span class="line">    return request(&#123;</span><br><span class="line">        url: &#39;&#x2F;api&#x2F;postSomethings&#39;,</span><br><span class="line">        methods: &#39;post&#39;,</span><br><span class="line">        data: params</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h2 id="5-编写一个组件"><a href="#5-编写一个组件" class="headerlink" title="5. 编写一个组件"></a>5. 编写一个组件</h2><p>为了减少时间，我们来替换掉<code>src/components/HelloWorld.vue</code>，做一个博客帖子组件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div class&#x3D;&quot;blogpost&quot;&gt;</span><br><span class="line">		&lt;h2&gt;&#123;&#123; post.title &#125;&#125;&lt;&#x2F;h2&gt;</span><br><span class="line">		&lt;p&gt;&#123;&#123; post.body &#125;&#125;&lt;&#x2F;p&gt;</span><br><span class="line">		&lt;p class&#x3D;&quot;meta&quot;&gt;Written by &#123;&#123; post.author &#125;&#125; on &#123;&#123; date &#125;&#125;&lt;&#x2F;p&gt;</span><br><span class="line">	&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang&#x3D;&quot;ts&quot;&gt;</span><br><span class="line">import &#123; Component, Prop, Vue &#125; from &#39;vue-property-decorator&#39;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 在这里对数据进行类型约束</span><br><span class="line">export interface Post &#123;</span><br><span class="line">	title: string;</span><br><span class="line">	body: string;</span><br><span class="line">	author: string;</span><br><span class="line">	datePosted: Date;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">export default class HelloWorld extends Vue &#123;</span><br><span class="line">	@Prop() private post!: Post;</span><br><span class="line"></span><br><span class="line">	get date() &#123;</span><br><span class="line">		return &#96;$&#123;this.post.datePosted.getDate()&#125;&#x2F;$&#123;this.post.datePosted.getMonth()&#125;&#x2F;$&#123;this.post.datePosted.getFullYear()&#125;&#96;;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">h2 &#123;</span><br><span class="line">  text-decoration: underline;</span><br><span class="line">&#125;</span><br><span class="line">p.meta &#123;</span><br><span class="line">  font-style: italic;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<p>然后在<code>Home.vue</code>中使用:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;home&quot;&gt;</span><br><span class="line">    &lt;img alt&#x3D;&quot;Vue logo&quot; src&#x3D;&quot;..&#x2F;assets&#x2F;logo.png&quot;&gt;</span><br><span class="line">   	&lt;HelloWorld v-for&#x3D;&quot;blogPost in blogPosts&quot; :post&#x3D;&quot;blogPost&quot; :key&#x3D;&quot;blogPost.title&quot; &#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang&#x3D;&quot;ts&quot;&gt;</span><br><span class="line">import &#123; Component, Vue &#125; from &#39;vue-property-decorator&#39;;</span><br><span class="line">import HelloWorld, &#123; Post &#125; from &#39;@&#x2F;components&#x2F;HelloWorld.vue&#39;; &#x2F;&#x2F; @ is an alias to &#x2F;src</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    HelloWorld,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line">export default class Home extends Vue &#123;</span><br><span class="line">    private blogPosts: Post[] &#x3D; [</span><br><span class="line">        &#123;</span><br><span class="line">          title: &#39;My first blogpost ever!&#39;,</span><br><span class="line">          body: &#39;Lorem ipsum dolor sit amet.&#39;,</span><br><span class="line">          author: &#39;Elke&#39;,</span><br><span class="line">          datePosted: new Date(2019, 1, 18),</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          title: &#39;Look I am blogging!&#39;,</span><br><span class="line">          body: &#39;Hurray for me, this is my second post!&#39;,</span><br><span class="line">          author: &#39;Elke&#39;,</span><br><span class="line">          datePosted: new Date(2019, 1, 19),</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          title: &#39;Another one?!&#39;,</span><br><span class="line">          body: &#39;Another one!&#39;,</span><br><span class="line">          author: &#39;Elke&#39;,</span><br><span class="line">          datePosted: new Date(2019, 1, 20),</span><br><span class="line">        &#125;,</span><br><span class="line">      ];</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<p>这时候运行项目：</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/6/14/16b53ada6dbb6000?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p>
<p>这就是简单的父子组件</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/6/13/16b512f306db5c07?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p>
<h2 id="6-参考文章"><a href="#6-参考文章" class="headerlink" title="6. 参考文章"></a>6. 参考文章</h2><p><a target="_blank" rel="noopener" href="https://medium.com/cleversonder/typescript-javascript-with-superpowers-part-ii-69a6bd2c6842">TypeScript — JavaScript with superpowers — Part II</a></p>
<p><a target="_blank" rel="noopener" href="https://ordina-jworks.github.io/vue/2019/03/04/vue-with-typescript.html#6-your-first-deployment">VUE WITH TYPESCRIPT</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5b54886ce51d45198f5c75d7#heading-6">TypeScript + 大型项目实战</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/972301/article/details/59537712">Python修饰符 （一）—— 函数修饰符 “@”</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5c2723635188252d1d34dc7d#heading-11">Typescript 中的 interface 和 type到底有什么区别</a></p>
<h2 id="7-总结"><a href="#7-总结" class="headerlink" title="7. 总结"></a>7. 总结</h2><p><img src="https://user-gold-cdn.xitu.io/2019/6/14/16b53e37a96b8d86?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p>
<p>而关于<code>Class API</code>撤销，其实还是挺舒服的。 用<code>class</code> 来编写 <code>Vue</code>组件确实太奇怪了。 (所以我这篇<code>Ts</code>入门压根没写<code>Class API</code>)</p>
<h2 id="https-user-gold-cdn-xitu-io-2019-6-14-16b53e5d5fd4daa2-imageView2-0-w-1280-h-960-format-webp-ignore-error-1"><a href="#https-user-gold-cdn-xitu-io-2019-6-14-16b53e5d5fd4daa2-imageView2-0-w-1280-h-960-format-webp-ignore-error-1" class="headerlink" title="![](https://user-gold-cdn.xitu.io/2019/6/14/16b53e5d5fd4daa2?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></a>![](<a target="_blank" rel="noopener" href="https://user-gold-cdn.xitu.io/2019/6/14/16b53e5d5fd4daa2?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">https://user-gold-cdn.xitu.io/2019/6/14/16b53e5d5fd4daa2?imageView2/0/w/1280/h/960/format/webp/ignore-error/1</a></h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/09/07/typescript%E5%85%A5%E9%97%A8/" data-id="ckerzj8jq0003l89edv9c8rsg" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/09/07/vue%E6%8A%80%E5%B7%A7/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          (no title)
        
      </div>
    </a>
  
  
    <a href="/2020/09/07/JavaScripts%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title"></div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/09/07/%E7%BB%84%E4%BB%B6%E5%8A%A8%E6%80%81%E6%B3%A8%E5%86%8C%E5%8F%8A%E6%B8%B2%E6%9F%93/">(no title)</a>
          </li>
        
          <li>
            <a href="/2020/09/07/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%A6%82%E5%BF%B5/">(no title)</a>
          </li>
        
          <li>
            <a href="/2020/09/07/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98/">(no title)</a>
          </li>
        
          <li>
            <a href="/2020/09/07/vue%E6%80%BB%E7%BB%93/">(no title)</a>
          </li>
        
          <li>
            <a href="/2020/09/07/vue%E6%8A%80%E5%B7%A7/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>